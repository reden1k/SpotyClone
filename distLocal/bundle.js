(()=>{"use strict";class t{static CLIENT_ID="cb18dd90851c4cdbb12c12905aa51e30";static CLIENT_SECRET="b6ebc17b8a454eb3b5f2cf75fb48f5e1";static REDIRECT_URI="http://localhost:8080";static AUTH_URL="https://accounts.spotify.com/authorize";static TOKEN_URL="https://accounts.spotify.com/authorize";static code;static getLink(){return window.location.href}static getAuthorizationUrl(){const t=encodeURIComponent(this.REDIRECT_URI),e=encodeURIComponent("user-read-private user-read-email playlist-read-private user-library-read playlist-modify-public playlist-modify-private");return`${this.AUTH_URL}?client_id=${this.CLIENT_ID}&response_type=code&redirect_uri=${t}&scope=${e}`}static getAuthCode(t){return t.substring(t.indexOf("?code=")+6)}static async requestAccessAndRefreshTokens(t){const e=btoa(`${this.CLIENT_ID}:${this.CLIENT_SECRET}`).toString("base64"),o=this.TOKEN_URL,s=new URLSearchParams({grant_type:"authorization_code",code:t,redirect_uri:encodeURIComponent(this.REDIRECT_URI)}),c=await fetch(o,{method:"POST",headers:{Authorization:`Basic ${e}`,"Content-Type":"application/x-www-form-urlencoded"},body:s});if(!c.ok)throw new Error(`Failed to request access and refresh tokens: ${c.status} ${c.statusText}`);const i=await c.json();return[i.access_token,i.refresh_token]}}window.addEventListener("DOMContentLoaded",(()=>{document.querySelector(".button-auth").addEventListener("click",(()=>{const e=t.getLink(),o=t.getAuthCode(e),s=t.requestAccessAndRefreshTokens(o);console.log(e),console.log(o),console.log(s)}))}))})();